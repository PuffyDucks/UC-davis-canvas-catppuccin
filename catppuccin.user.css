/* ==UserStyle==
@name         Dark Mode for UC Davis Canvas
@version      0.0.1
@namespace    puffyducks
@description  Canvas dark mode implementation for UC Davis students
@author       PuffyDucks
@license      GNU-GPL v3.0
@preprocessor   stylus
@var select theme "Theme" ["Latte", "Frappe", "Macchiato", "Mocha*"]
@var select accent-color "Accent" ["Rosewater*", "Flamingo", "Pink", "Mauve", "Red", "Maroon", "Peach", "Yellow", "Green", "Teal", "Blue", "Sapphire", "Sky", "Lavender", "Gray"]
==/UserStyle== */

@-moz-document url-prefix("https://canvas.ucdavis.edu/") {
  @media (prefers-color-scheme: light) {
      :root {
          #catppuccin(@lightFlavor, @accentColor);
      }
  }
  @media (prefers-color-scheme: dark) {
      :root {
          #catppuccin(@darkFlavor, @accentColor);
      }
  }

  /* prettier-ignore */
  @catppuccin: {
      @latte: {
          @rosewater: #dc8a78;
          @flamingo: #dd7878;
          @pink: #ea76cb;
          @mauve: #8839ef;
          @red: #d20f39;
          @maroon: #e64553;
          @peach: #fe640b;
          @yellow: #df8e1d;
          @green: #40a02b;
          @teal: #179299;
          @sky: #04a5e5;
          @sapphire: #209fb5;
          @blue: #1e66f5;
          @lavender: #7287fd;
          @text: #4c4f69;
          @subtext1: #5c5f77;
          @subtext0: #6c6f85;
          @overlay2: #7c7f93;
          @overlay1: #8c8fa1;
          @overlay0: #9ca0b0;
          @surface2: #acb0be;
          @surface1: #bcc0cc;
          @surface0: #ccd0da;
          @base: #eff1f5;
          @mantle: #e6e9ef;
          @crust: #dce0e8;
      }
      ;
      @frappe: {
          @rosewater: #f2d5cf;
          @flamingo: #eebebe;
          @pink: #f4b8e4;
          @mauve: #ca9ee6;
          @red: #e78284;
          @maroon: #ea999c;
          @peach: #ef9f76;
          @yellow: #e5c890;
          @green: #a6d189;
          @teal: #81c8be;
          @sky: #99d1db;
          @sapphire: #85c1dc;
          @blue: #8caaee;
          @lavender: #babbf1;
          @text: #c6d0f5;
          @subtext1: #b5bfe2;
          @subtext0: #a5adce;
          @overlay2: #949cbb;
          @overlay1: #838ba7;
          @overlay0: #737994;
          @surface2: #626880;
          @surface1: #51576d;
          @surface0: #414559;
          @base: #303446;
          @mantle: #292c3c;
          @crust: #232634;
      }
      ;
      @macchiato: {
          @rosewater: #f4dbd6;
          @flamingo: #f0c6c6;
          @pink: #f5bde6;
          @mauve: #c6a0f6;
          @red: #ed8796;
          @maroon: #ee99a0;
          @peach: #f5a97f;
          @yellow: #eed49f;
          @green: #a6da95;
          @teal: #8bd5ca;
          @sky: #91d7e3;
          @sapphire: #7dc4e4;
          @blue: #8aadf4;
          @lavender: #b7bdf8;
          @text: #cad3f5;
          @subtext1: #b8c0e0;
          @subtext0: #a5adcb;
          @overlay2: #939ab7;
          @overlay1: #8087a2;
          @overlay0: #6e738d;
          @surface2: #5b6078;
          @surface1: #494d64;
          @surface0: #363a4f;
          @base: #24273a;
          @mantle: #1e2030;
          @crust: #181926;
      }
      ;
      @mocha: {
          @rosewater: #f5e0dc;
          @flamingo: #f2cdcd;
          @pink: #f5c2e7;
          @mauve: #cba6f7;
          @red: #f38ba8;
          @maroon: #eba0ac;
          @peach: #fab387;
          @yellow: #f9e2af;
          @green: #a6e3a1;
          @teal: #94e2d5;
          @sky: #89dceb;
          @sapphire: #74c7ec;
          @blue: #89b4fa;
          @lavender: #b4befe;
          @text: #cdd6f4;
          @subtext1: #bac2de;
          @subtext0: #a6adc8;
          @overlay2: #9399b2;
          @overlay1: #7f849c;
          @overlay0: #6c7086;
          @surface2: #585b70;
          @surface1: #45475a;
          @surface0: #313244;
          @base: #1e1e2e;
          @mantle: #181825;
          @crust: #11111b;
      }
      ;
  }

  #catppuccin(@lookup, @accent) {
      @rosewater: @catppuccin[@@lookup][@rosewater];
      @flamingo: @catppuccin[@@lookup][@flamingo];
      @pink: @catppuccin[@@lookup][@pink];
      @mauve: @catppuccin[@@lookup][@mauve];
      @red: @catppuccin[@@lookup][@red];
      @maroon: @catppuccin[@@lookup][@maroon];
      @peach: @catppuccin[@@lookup][@peach];
      @yellow: @catppuccin[@@lookup][@yellow];
      @green: @catppuccin[@@lookup][@green];
      @teal: @catppuccin[@@lookup][@teal];
      @sky: @catppuccin[@@lookup][@sky];
      @sapphire: @catppuccin[@@lookup][@sapphire];
      @blue: @catppuccin[@@lookup][@blue];
      @lavender: @catppuccin[@@lookup][@lavender];
      @text: @catppuccin[@@lookup][@text];
      @subtext1: @catppuccin[@@lookup][@subtext1];
      @subtext0: @catppuccin[@@lookup][@subtext0];
      @overlay2: @catppuccin[@@lookup][@overlay2];
      @overlay1: @catppuccin[@@lookup][@overlay1];
      @overlay0: @catppuccin[@@lookup][@overlay0];
      @surface2: @catppuccin[@@lookup][@surface2];
      @surface1: @catppuccin[@@lookup][@surface1];
      @surface0: @catppuccin[@@lookup][@surface0];
      @base: @catppuccin[@@lookup][@base];
      @mantle: @catppuccin[@@lookup][@mantle];
      @crust: @catppuccin[@@lookup][@crust];
      @accent-color: @catppuccin[@@lookup][@@accent];

      a,
      .page-title, .ig-list .ig-row a.ig-title,
      .ellipsible {
          color: @text
      }
      
      a:link, a:visited,
      .css-10am28f-text,
      .css-1v7gzzc-text,
      .css-1hilv69-text
      {
          color: @accent-color;
          text-decoration-color: @blue;
      }
      
      .css-wdjw8c-avatar__initials,
      .css-m7dc0-view--inlineBlock-avatar,
      .css-152kj4z-checkboxFacade__facade{
          color: @accent-color;
          background-color: @mantle;
          border-color: @surface2;
      }
      
      .css-1mtgjqq-textInput:is(input)[type]::placeholder {
          color: @text;
          opacity: 1
      }
      
      .icon-check {
          color: @green !important
      }
      
      .list-view a.active {
          color: @text !important;
          border-left-color: @text !important;
      }
      
      .css-tpuo6v-text,
      .css-1vfp3rz-text,
      .css-qbjizl-text{
          color: @overlay2
      }
      
      .css-1xf7txc-baseButton__content,
      .css-10mk03b-baseButton__content,
      .css-152kj4z-checkboxFacade__facade,
      .css-1vfp3rz-text,
      .ui-button btn-view{
          background: 0;
          opacity: 1;
          border-color: #FFF;
          color: #FFF
      }
      
      #breadcrumbs,
      #printQuizButton,
      #content,
      .navigation-tray-container,
      .ic-Dashboard-header__layout,
      .button-sidebar-wide,
      .access_tokens,
      .context_modules,
      .textarea-container,
      .Button,
      .panel,
      body {
         background-color: @base;
         color: @accent-color
      }
      
      #application,
      .comments,
      .module-sequence-footer-content,
      .immersive_reader_mount_point,
      .context_modules,
      .css-f88gdg-baseButton__content{
          background: @base !important;
          background-color: @base !important;
          color: @accent-color !important;
      }

      *:not(a, svg, span, 
          .ic-DashboardCard__header_hero, 
          .ic-DashboardCard__action-layout,
          .menu-item-icon-container,
          .ic-app-header__main-navigation,
          .ic-app-header__logomark-container,
          .icon-check
      ), .hidden-phone {
          color: @text !important;
          background-color: @base !important;
      }
      
      #header, .ic-app-header__logomark-container {
         background-color: @mantle !important;
      }

      .ic-app-header__menu-list-item 
      .ic-app-header__menu-list-link {
         background-color: @mantle;
      }
      
      
      
      .ic-app-header__menu-list-item.ic-app-header__menu-list-item--active .ic-app-header__menu-list-link {
        background: @base;
      }

      .ic-DashboardCard {
          box-shadow: 0 2px 6px rgba(0, 0, 0, .4)
      }
      
      #right-side .events_list .event-details::after,
      #right-side .events_list .todo-details::after,
      #right-side .to-do-list .event-details::after,
      #right-side .to-do-list .todo-details::after {
          content: "";
          position: absolute;
          top: 0;
          right: 0;
          height: 100%;
          width: 12px;
          background: linear-gradient( to right,
          rgba(255, 255, 255, 0) 0%,
          @base 80%);
      }

      :root {
          --ic-brand-global-nav-avatar-border: @accent-color;
          --ic-brand-font-color-dark: fadeout(@accent-color, 0.8);
          --ic-brand-primary: @accent-color;
          --ic-brand-global-nav-ic-icon-svg-fill: fadeout(@accent-color, 0.5);
          --eMdva-color: @base !important;
      }
      .unread_count,
      .menu-item-icon-container,
      .nav-badge,
      .css-j68kdy-formFieldLabel,
      .assignment_sort_order_select_menu,
      .name{
          color: @text;
          text-shadow: 0px 0px;
      }
      
      .menu-item__badge, .ic-app-header__menu-list-item.ic-app-header__menu-list-item--active .menu-item__badge{
          background-color: @accent-color;
          color: @surface1;
      }
      
      .ic-app-header__menu-list-item.ic-app-header__menu-list-item--active .ic-icon-svg {
          fill: @accent-color;
      }
      
      .list-view a.active {
          border-left-color: #007fff;
          color: #007fff;
      } // Fix file preview
      nav.ViewerControls * {
          background-color: @surface1 !important;
      }
      div.Pages,
      .Page-container {
          background-color: #f2f2f2 !important;
      }
      .Page-container * {
          background-color: transparent !important;
      }
      
      .css-svglmx-toggleFacade__facade,
      .css-1pkpuv1-toggleFacade__facade {
          background: @overlay1
      }
      
      .css-htn7vy-toggleFacade__facade,
      .css-htn7vy-toggleFacade__facade {
          background: @green;
      }
      
      #calendar-app .fc-event, #calendar-drag-and-drop-container .fc-event         {
          padding: 1px;
      }
      
      #minical .fc-widget-content {
          border: 0;
      }
  }
}
// vim:ft=less
